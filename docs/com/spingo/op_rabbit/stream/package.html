<!DOCTYPE html >
<html>
        <head>
          <title>stream - com.spingo.op_rabbit.stream</title>
          <meta name="description" content="stream - com.spingo.op rabbit.stream" />
          <meta name="keywords" content="stream com.spingo.op rabbit.stream" />
          <meta http-equiv="content-type" content="text/html; charset=UTF-8" />
          
      <link href="../../../../lib/template.css" media="screen" type="text/css" rel="stylesheet" />
      <link href="../../../../lib/diagrams.css" media="screen" type="text/css" rel="stylesheet" id="diagrams-css" />
      <script type="text/javascript" src="../../../../lib/jquery.js" id="jquery-js"></script>
      <script type="text/javascript" src="../../../../lib/jquery-ui.js"></script>
      <script type="text/javascript" src="../../../../lib/template.js"></script>
      <script type="text/javascript" src="../../../../lib/tools.tooltip.js"></script>
      
      <script type="text/javascript">
         if(top === self) {
            var url = '../../../../index.html';
            var hash = 'com.spingo.op_rabbit.stream.package';
            var anchor = window.location.hash;
            var anchor_opt = '';
            if (anchor.length >= 1)
              anchor_opt = '@' + anchor.substring(1);
            window.location.href = url + '#' + hash + anchor_opt;
         }
   	  </script>
    
        </head>
        <body class="value">
      <div id="definition">
        <img alt="Package" src="../../../../lib/package_big.png" />
        <p id="owner"><a href="../../../package.html" class="extype" name="com">com</a>.<a href="../../package.html" class="extype" name="com.spingo">spingo</a>.<a href="../package.html" class="extype" name="com.spingo.op_rabbit">op_rabbit</a></p>
        <h1>stream</h1><span class="permalink">
      <a href="../../../../index.html#com.spingo.op_rabbit.stream.package" title="Permalink" target="_top">
        <img src="../../../../lib/permalink.png" alt="Permalink" />
      </a>
    </span>
      </div>

      <h4 id="signature" class="signature">
      <span class="modifier_kind">
        <span class="modifier"></span>
        <span class="kind">package</span>
      </span>
      <span class="symbol">
        <span class="name">stream</span>
      </span>
      </h4>
      
          <div id="comment" class="fullcommenttop"><div class="comment cmt"><h4> Batteries not included </h4><p>  To use this package, you must add <code>'op-rabbit-akka-stream'</code> to your dependencies.</p><h4> Overview </h4></div><dl class="attributes block"> <dt>See also</dt><dd><span class="cmt"><p><a href="https://github.com/SpinGo/op-rabbit/tree/master/addons/akka-stream/src/test/scala/com/spingo/op_rabbit" target="_blank">Akka Stream Specs on GitHub</a></p></span></dd></dl><div class="toggleContainer block">
          <span class="toggle">Linear Supertypes</span>
          <div class="superTypes hiddenContent"><span class="extype" name="scala.AnyRef">AnyRef</span>, <span class="extype" name="scala.Any">Any</span></div>
        </div></div>
        

      <div id="mbrsel">
        <div id="textfilter"><span class="pre"></span><span class="input"><input id="mbrsel-input" type="text" accesskey="/" /></span><span class="post"></span></div>
        <div id="order">
              <span class="filtertype">Ordering</span>
              <ol>
                
                <li class="alpha in"><span>Alphabetic</span></li>
                <li class="inherit out"><span>By Inheritance</span></li>
              </ol>
            </div>
        <div id="ancestors">
                <span class="filtertype">Inherited<br />
                </span>
                <ol id="linearization">
                  <li class="in" name="com.spingo.op_rabbit.stream"><span>stream</span></li><li class="in" name="scala.AnyRef"><span>AnyRef</span></li><li class="in" name="scala.Any"><span>Any</span></li>
                </ol>
              </div><div id="ancestors">
            <span class="filtertype"></span>
            <ol>
              <li class="hideall out"><span>Hide All</span></li>
              <li class="showall in"><span>Show All</span></li>
            </ol>
          </div>
        <div id="visbl">
            <span class="filtertype">Visibility</span>
            <ol><li class="public in"><span>Public</span></li><li class="all out"><span>All</span></li></ol>
          </div>
      </div>

      <div id="template">
        <div id="allMembers">
        

        <div id="types" class="types members">
              <h3>Type Members</h3>
              <ol><li name="com.spingo.op_rabbit.stream.MessageNacked" visbl="pub" data-isabs="false" fullComment="no" group="Ungrouped">
      <a id="MessageNackedextendsException"></a>
      <a id="MessageNacked:MessageNacked"></a>
      <h4 class="signature">
      <span class="modifier_kind">
        <span class="modifier"></span>
        <span class="kind">class</span>
      </span>
      <span class="symbol">
        <a href="package$$MessageNacked.html"><span class="name">MessageNacked</span></a><span class="result"> extends <span class="extype" name="scala.Exception">Exception</span></span>
      </span>
      </h4><span class="permalink">
      <a href="../../../../index.html#com.spingo.op_rabbit.stream.package@MessageNackedextendsException" title="Permalink" target="_top">
        <img src="../../../../lib/permalink.png" alt="Permalink" />
      </a>
    </span>
      <p class="shortcomment cmt">    Used by <a href="MessagePublisherSink$.html" class="extype" name="com.spingo.op_rabbit.stream.MessagePublisherSink">MessagePublisherSink</a> to fail elements in the case the <a href="https://www.rabbitmq.com/confirms.html" target="_blank">RabbitMQ broker &quot;negatively acknowledges&quot; a published message</a>.</p>
    </li></ol>
            </div>

        

        <div id="values" class="values members">
              <h3>Value Members</h3>
              <ol><li name="com.spingo.op_rabbit.stream.MessagePublisherSink" visbl="pub" data-isabs="false" fullComment="yes" group="Ungrouped">
      <a id="MessagePublisherSink"></a>
      <a id="MessagePublisherSink:MessagePublisherSink"></a>
      <h4 class="signature">
      <span class="modifier_kind">
        <span class="modifier"></span>
        <span class="kind">object</span>
      </span>
      <span class="symbol">
        <a href="MessagePublisherSink$.html"><span class="name">MessagePublisherSink</span></a>
      </span>
      </h4><span class="permalink">
      <a href="../../../../index.html#com.spingo.op_rabbit.stream.package@MessagePublisherSink" title="Permalink" target="_top">
        <img src="../../../../lib/permalink.png" alt="Permalink" />
      </a>
    </span>
      <p class="shortcomment cmt">  A MessagePublisherSink (an <a href="https://github.com/timcharper/acked-stream/blob/master/src/main/scala/com/timcharper/acked/AckedSink.scala" target="_blank">AckedSink</a>) publishes each input <a href="../Message.html" class="extype" name="com.spingo.op_rabbit.Message">Message</a>, and either acks or fails the upstream element, depending on <a href="../Message$$ConfirmResponse.html" class="extype" name="com.spingo.op_rabbit.Message.ConfirmResponse">ConfirmResponse</a>.</p><div class="fullcomment"><div class="comment cmt"><p>  A MessagePublisherSink (an <a href="https://github.com/timcharper/acked-stream/blob/master/src/main/scala/com/timcharper/acked/AckedSink.scala" target="_blank">AckedSink</a>) publishes each input <a href="../Message.html" class="extype" name="com.spingo.op_rabbit.Message">Message</a>, and either acks or fails the upstream element, depending on <a href="../Message$$ConfirmResponse.html" class="extype" name="com.spingo.op_rabbit.Message.ConfirmResponse">ConfirmResponse</a>.</p><p>  Using a <a href="RabbitSource$.html" class="extype" name="com.spingo.op_rabbit.stream.RabbitSource">RabbitSource</a> with a <a href="MessagePublisherSink$.html" class="extype" name="com.spingo.op_rabbit.stream.MessagePublisherSink">MessagePublisherSink</a> is a great way to get persistent, recoverable streams.</p><p>  Note - MessagePublisherSink uses ActorPublisher and due to AkkaStream limitations, it DOES NOT abide your configured supervisor strategy.</p><h4> <a href="../Message$$ConfirmResponse.html" class="extype" name="com.spingo.op_rabbit.Message.ConfirmResponse">Message.ConfirmResponse</a> handling </h4><p>  After the sink publishes the <a href="../Message.html" class="extype" name="com.spingo.op_rabbit.Message">Message</a>, it listens for the <a href="../Message$$ConfirmResponse.html" class="extype" name="com.spingo.op_rabbit.Message.ConfirmResponse">Message.ConfirmResponse</a>, and handles it accordingly:</p><ul><li>On <a href="../Message$$Ack.html" class="extype" name="com.spingo.op_rabbit.Message.Ack">Message.Ack</a>, ack the upstream element.</li><li>On <a href="../Message$$Nack.html" class="extype" name="com.spingo.op_rabbit.Message.Nack">Message.Nack</a>, fail the upstream element with
    <a href="package$$MessageNacked.html" class="extype" name="com.spingo.op_rabbit.stream.MessageNacked">MessageNacked</a>. <b>Does not</b> throw a stream
    exception. Processing continues.</li><li>On <a href="../Message$$Fail.html" class="extype" name="com.spingo.op_rabbit.Message.Fail">Message.Fail</a>, fail the upstream element with
    publisher exception. <b>Does not</b> throw a stream
    exception. Processing continues.</li></ul><h4> Future[Unit] materialized type: </h4><p>  This sinks materialized type is Future[Unit]. The following applies:</p><ul><li>It yields any upstream failure as soon as it reaches the sink (potentially before messages are confirmed).</li><li>After the stream completes, and all <a href="../Message$$ConfirmResponse.html" class="extype" name="com.spingo.op_rabbit.Message.ConfirmResponse">Message.ConfirmResponse</a>'s have have been processed, the Future[Unit] is completed.
</li></ul></div></div>
    </li><li name="com.spingo.op_rabbit.stream.RabbitSource" visbl="pub" data-isabs="false" fullComment="yes" group="Ungrouped">
      <a id="RabbitSource"></a>
      <a id="RabbitSource:RabbitSource"></a>
      <h4 class="signature">
      <span class="modifier_kind">
        <span class="modifier"></span>
        <span class="kind">object</span>
      </span>
      <span class="symbol">
        <a href="RabbitSource$.html"><span class="name">RabbitSource</span></a>
      </span>
      </h4><span class="permalink">
      <a href="../../../../index.html#com.spingo.op_rabbit.stream.package@RabbitSource" title="Permalink" target="_top">
        <img src="../../../../lib/permalink.png" alt="Permalink" />
      </a>
    </span>
      <p class="shortcomment cmt">Creates an op-rabbit consumer whose messages are delivered through an
<a href="https://github.com/timcharper/acked-stream/blob/master/src/main/scala/com/timcharper/acked/AckedSource.scala" target="_blank">AckedSource</a>.</p><div class="fullcomment"><div class="comment cmt"><p>Creates an op-rabbit consumer whose messages are delivered through an
<a href="https://github.com/timcharper/acked-stream/blob/master/src/main/scala/com/timcharper/acked/AckedSource.scala" target="_blank">AckedSource</a>. Message order guarantees are maintained.</p><p>IMPORTANT NOTE ON ACKNOWLEDGED MESSAGES</p><p>(if you are seeing unacknowledged messages accumulated, followed by the
stream progress halting, you will want to pay special attention to this)</p><p>The 'Acked' variety of streams provide type-safe guarantees that
acknowledgments aren't dropped on the floor. Filtering a message from the
stream (via collect, filter, or mapConcat -&gt; Nil), for example, will cause
the incomming RabbitMQ message to be acknowledged.</p><p>If you begin constructing your own Acked components and interacting with the
<code>AckTup[T]</code> type directly (or, <code>(Promise[Unit], T)</code>), you must take caution
that the promise is not dropped on the floor. This means, every time an
exception could be thrown, you must catch it and propagate said exception to
the Promise by calling <code>promise.fail(ex)</code>.</p><p>If you integrate with a stream compoment that does not support acknowledged
streams, you will probably want to acknowledge the message before sending
messages to it (by using the <code>.acked</code> acked-stream operation). If it is
important that you acknowledge messages after the flow is complete, and the
library doesn't provide a reliable way to propagate element exceptions, you
will likely want exception to crash the stream (IE: don't resume the stream
on exception). Otherwise, if using a resuming decider, you risk elements
being dropped and unacknowledged messages accumulating.</p><p>Example:</p><pre><span class="kw">import</span> com.spingo.op_rabbit.Directives._
RabbitSource(
  rabbitControl,
  channel(qos = <span class="num">3</span>),
  consume(queue(<span class="lit">"such-queue"</span>, durable = <span class="kw">true</span>, exclusive = <span class="kw">false</span>, autoDelete = <span class="kw">false</span>)),
  body(as[Person])).
  runForeach { person <span class="kw">=&gt;</span>
    greet(person)
  } <span class="cmt">// after each successful iteration the message is acknowledged.</span></pre></div></div>
    </li><li name="com.spingo.op_rabbit.stream.UnconfirmedPublisherSink" visbl="pub" data-isabs="false" fullComment="no" group="Ungrouped">
      <a id="UnconfirmedPublisherSink"></a>
      <a id="UnconfirmedPublisherSink:UnconfirmedPublisherSink"></a>
      <h4 class="signature">
      <span class="modifier_kind">
        <span class="modifier"></span>
        <span class="kind">object</span>
      </span>
      <span class="symbol">
        <a href="UnconfirmedPublisherSink$.html"><span class="name">UnconfirmedPublisherSink</span></a>
      </span>
      </h4><span class="permalink">
      <a href="../../../../index.html#com.spingo.op_rabbit.stream.package@UnconfirmedPublisherSink" title="Permalink" target="_top">
        <img src="../../../../lib/permalink.png" alt="Permalink" />
      </a>
    </span>
      
    </li></ol>
            </div>

        

        
        </div>

        <div id="inheritedMembers">
        <div class="parent" name="scala.AnyRef">
              <h3>Inherited from <span class="extype" name="scala.AnyRef">AnyRef</span></h3>
            </div><div class="parent" name="scala.Any">
              <h3>Inherited from <span class="extype" name="scala.Any">Any</span></h3>
            </div>
        
        </div>

        <div id="groupedMembers">
        <div class="group" name="Ungrouped">
              <h3>Ungrouped</h3>
              
            </div>
        </div>

      </div>

      <div id="tooltip"></div>

      <div id="footer">  </div>


    </body>
      </html>
